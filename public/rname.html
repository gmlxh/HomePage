<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>èŠ‚ç‚¹æ‰¹é‡é‡å‘½åå·¥å…·</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-gradient-start: #f9fafb;
            --bg-gradient-end: #ffffff;
            --card-bg: #ffffff;
            --text-color: #374151;
            --text-color-light: #6b7280;
            --heading-color: #1f2937;
            --primary-color: #60a5fa;
            --primary-color-dark: #3b82f6;
            --primary-color-light: #f0f9ff;
            --secondary-color: #34d399;
            --secondary-color-dark: #10b981;
            --danger-color: #f87171;
            --danger-color-dark: #ef4444;
            --border-color: #e5e7eb;
            --shadow-color: rgba(99, 102, 241, 0.07);
            --font-main: 'Noto Sans SC', 'Inter', sans-serif;
            --border-radius: 1rem;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        ::selection {
            background-color: lightpink;
            color: #ffffff;
        }

        body::-webkit-scrollbar {
            width: 12px;
        }

        body::-webkit-scrollbar-track {
            background: var(--bg-gradient-start);
        }

        body::-webkit-scrollbar-thumb {
            background-color: #e5e7eb;
            border-radius: 10px;
            border: 3px solid var(--bg-gradient-start);
        }

        body::-webkit-scrollbar-thumb:hover {
            background-color: #d1d5db;
        }

        body {
            font-family: var(--font-main);
            background-color: var(--bg-gradient-start);
            background-image: linear-gradient(160deg, var(--bg-gradient-start) 0%, var(--bg-gradient-end) 100%);
            color: var(--text-color);
            padding: 2rem;
            line-height: 1.6;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
        }

        .container {
            width: 100%;
            max-width: 1400px;
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }

        .main-header {
            text-align: center;
            margin-bottom: 1rem;
        }

        .main-header h1 {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--heading-color);
        }

        .main-header p {
            font-size: 1rem;
            color: var(--text-color-light);
            margin-top: 0.75rem;
            font-weight: 500;
        }

        .main-header .protocol-badge {
            display: inline-block;
            background-color: var(--primary-color-light);
            color: var(--primary-color);
            padding: 0.15rem 0.6rem;
            border-radius: 0.5rem;
            font-size: 0.9rem;
            margin: 0 0.2rem;
            font-weight: 700;
        }

        .card {
            background-color: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 2.5rem;
            box-shadow: 0 10px 15px -3px var(--shadow-color), 0 4px 6px -4px var(--shadow-color);
            border: 1px solid #f3f4f6;
            transition: box-shadow 0.3s ease;
        }

        .card:hover {
            box-shadow: 0 20px 25px -5px var(--shadow-color), 0 8px 10px -6px var(--shadow-color);
        }

        .card h2 {
            font-size: 1.25rem;
            font-weight: 700;
            margin-bottom: 1.5rem;
            color: var(--heading-color);
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .card h2 svg {
            width: 24px;
            height: 24px;
            color: var(--primary-color);
        }

        .config-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 1.5rem 2rem;
            align-items: flex-end;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-group label {
            font-weight: 500;
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
            color: var(--text-color-light);
        }

        .form-group input[type="text"],
        .form-group input[type="number"],
        .form-group select {
            padding: 0.75rem 1rem;
            border: 1px solid var(--border-color);
            border-radius: 0.5rem;
            font-size: 1rem;
            font-family: var(--font-main);
            transition: border-color 0.3s, box-shadow 0.3s;
        }

        .form-group input[type="text"]:focus,
        .form-group input[type="number"]:focus,
        .form-group select:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px var(--primary-color-light);
        }

        .form-group select {
            -webkit-appearance: none;
            appearance: none;
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
            background-position: right 0.5rem center;
            background-repeat: no-repeat;
            background-size: 1.5em 1.5em;
            padding-right: 2.5rem;
        }

        .form-group.full-width {
            grid-column: 1 / -1;
        }

        .main-actions {
            margin-top: 2rem;
            padding-top: 2rem;
            display: flex;
            justify-content: center;
            gap: 1.5rem;
            flex-wrap: wrap;
            border-top: 1px solid var(--border-color);
        }

        .btn {
            padding: 0.75rem 1.75rem;
            font-size: 1rem;
            font-weight: 500;
            border-radius: 0.5rem;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            border: 1px solid transparent;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1);
        }

        .btn svg {
            width: 18px;
            height: 18px;
        }

        .btn:hover {
            filter: brightness(1.1);
        }

        .btn-primary {
            background-color: var(--primary-color);
            color: white;
        }

        .btn-primary:hover {
            background-color: var(--primary-color-dark);
        }

        .btn-secondary {
            background-color: var(--secondary-color);
            color: white;
        }

        .btn-secondary:hover {
            background-color: var(--secondary-color-dark);
        }

        .btn-danger {
            background-color: var(--danger-color);
            color: white;
        }

        .btn-danger:hover {
            background-color: var(--danger-color-dark);
        }

        .io-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 2.5rem;
        }

        textarea {
            width: 100%;
            height: 380px;
            padding: 1rem;
            border: 1px solid var(--border-color);
            border-radius: 0.75rem;
            font-family: var(--font-main);
            resize: none;
            line-height: 1.6;
            transition: border-color 0.3s, box-shadow 0.3s;
        }

        textarea:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px var(--primary-color-light);
        }

        textarea::placeholder {
            color: #9CA3AF;
        }

        textarea::-webkit-scrollbar,
        .tab-pane::-webkit-scrollbar {
            width: 10px;
        }

        textarea::-webkit-scrollbar-track,
        .tab-pane::-webkit-scrollbar-track {
            background: #f1f5f9;
            border-radius: 10px;
        }

        textarea::-webkit-scrollbar-thumb,
        .tab-pane::-webkit-scrollbar-thumb {
            background-color: #d1d5db;
            border-radius: 10px;
        }

        textarea::-webkit-scrollbar-thumb:hover,
        .tab-pane::-webkit-scrollbar-thumb:hover {
            background-color: #9ca3af;
        }

        #notification {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%) translateY(200%);
            background-color: var(--heading-color);
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15);
            font-weight: 500;
            font-size: 0.95rem;
            transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            z-index: 1000;
            opacity: 0;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        #notification svg {
            width: 18px;
            height: 18px;
        }

        #notification.show {
            transform: translateX(-50%) translateY(0);
            opacity: 1;
        }

        footer {
            text-align: center;
            margin-top: 2rem;
            color: #6B7280;
        }

        footer span {
            color: var(--primary-color);
            text-decoration: none;
            font-weight: 500;
        }

        footer span:hover {
            cursor: pointer;
        }

        #namePreviewBox {
            grid-column: 1 / -1;
            margin-top: 1rem;
        }

        #namePreview {
            padding: 0.75rem 1rem;
            border: 1px dashed var(--border-color);
            border-radius: 0.5rem;
            color: var(--text-color);
            background-color: #f8fafc;
            font-weight: 500;
            min-height: 49px;
            display: flex;
            align-items: center;
            word-break: break-all;
        }

        .tabs-container {
            display: flex;
            flex-direction: column;
            height: 100%;
            min-height: 450px;
        }

        .tabs-nav {
            display: flex;
            border-bottom: 1px solid var(--border-color);
        }

        .tab-item {
            padding: 0.75rem 1.25rem;
            cursor: pointer;
            border-bottom: 2px solid transparent;
            color: var(--text-color-light);
            font-weight: 500;
            transition: all 0.2s ease;
        }

        .tab-item.active {
            color: var(--primary-color);
            border-bottom-color: var(--primary-color);
        }

        .tab-content {
            flex-grow: 1;
            position: relative;
        }

        .tab-pane {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow-y: auto;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.2s;
            background-color: #ffffff;
            border: 1px solid var(--border-color);
            border-top: none;
            border-radius: 0 0 0.75rem 0.75rem;
        }

        #tab-output {
            overflow: hidden;
            padding: 0;
        }

        #tab-output textarea {
            height: 100%;
            width: 100%;
            border: none;
            border-radius: 0;
            box-shadow: none;
            resize: none;
        }

        .tab-pane.active {
            opacity: 1;
            visibility: visible;
            z-index: 1;
        }

        #tab-output textarea {
            height: 100%;
            border: none;
            border-radius: 0;
            resize: none;
            transition: none;
            box-shadow: none;
        }

        #tab-output textarea:focus {
            box-shadow: none;
        }

        .comparison-item {
            display: grid;
            grid-template-columns: 100px 1fr auto 1fr;
            align-items: center;
            padding: 0.75rem;
            border-bottom: 1px solid #f3f4f6;
            gap: 0.75rem 1rem;
            font-size: 0.9rem;
        }

        .comparison-item:last-child {
            border-bottom: none;
        }

        .comparison-name {
            word-break: break-all;
            color: var(--text-color-light);
        }

        .comparison-name.renamed {
            color: var(--text-color);
            font-weight: 500;
        }

        .comparison-arrow {
            color: var(--primary-color);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .comparison-arrow svg {
            width: 20px;
            height: 20px;
        }

        .protocol-tag {
            display: inline-block;
            padding: 0.2rem 0.5rem;
            border-radius: 0.375rem;
            font-size: 0.75rem;
            font-weight: 700;
            text-align: center;
            width: 100%;
            max-width: 100px;
        }

        .protocol-tag--vmess {
            color: #2563eb;
            background-color: #dbeafe;
            border: 1px solid #bfdbfe;
        }

        .protocol-tag--vless {
            color: #7c3aed;
            background-color: #ede9fe;
            border: 1px solid #ddd6fe;
        }

        .protocol-tag--ss {
            color: #16a34a;
            background-color: #dcfce7;
            border: 1px solid #bbf7d0;
        }

        .protocol-tag--trojan {
            color: #dc2626;
            background-color: #fee2e2;
            border: 1px solid #fecaca;
        }

        .protocol-tag--hysteria2 {
            color: #f97316;
            background-color: #ffedd5;
            border: 1px solid #fed7aa;
        }

        .protocol-tag--tuic {
            color: #0d9488;
            background-color: #ccfbf1;
            border: 1px solid #99f6e4;
        }

        .protocol-tag--anytls,
        .protocol-tag--socks {
            color: #57534e;
            background-color: #e7e5e4;
            border: 1px solid #d6d3d1;
        }

        .protocol-tag--æœªçŸ¥ {
            color: #4b5563;
            background-color: #f3f4f6;
            border: 1px solid #e5e7eb;
        }

        #analysisResult {
            padding: 1rem;
        }

        #analysisResult h4 {
            font-size: 1rem;
            color: var(--primary-color);
            margin-bottom: 0.5rem;
            margin-top: 0.75rem;
        }

        #analysisResult h4:first-child {
            margin-top: 0;
        }

        #analysisResult ul {
            list-style: none;
            padding-left: 0;
        }

        #analysisResult li {
            display: flex;
            justify-content: space-between;
            padding: 0.4rem 0.1rem;
            border-bottom: 1px solid #f3f4f6;
            font-size: 0.9rem;
        }

        #analysisResult li .name {
            color: var(--text-color);
        }

        #analysisResult li .count {
            font-weight: 700;
            color: #0284c7;
        }

        .format-tags {
            font-size: 0.85rem;
            color: var(--text-color-light);
            margin-top: 0.5rem;
        }

        .format-tags code {
            background-color: #f3f4f6;
            color: var(--primary-color-dark);
            padding: 0.1rem 0.3rem;
            border-radius: 4px;
            font-weight: 700;
        }

        @media (min-width: 992px) {
            .io-grid {
                grid-template-columns: 1fr 1fr;
            }

            .io-grid>div {
                display: flex;
                flex-direction: column;
            }

            .tabs-container {
                flex-grow: 1;
            }
        }

        @media (max-width: 768px) {
            body {
                padding: 1rem;
            }

            .container {
                gap: 1.5rem;
            }

            .card {
                padding: 1.5rem;
            }

            .main-header h1 {
                font-size: 2rem;
            }

            .config-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <header class="main-header">
            <h1>èŠ‚ç‚¹æ‰¹é‡é‡å‘½å</h1>
            <p>
                æ”¯æŒåè®®:
                <span class="protocol-badge">SS</span>
                <span class="protocol-badge">VLESS</span>
                <span class="protocol-badge">VMESS</span>
                <span class="protocol-badge">Trojan</span>
                <span class="protocol-badge">Hysteria2</span>
                <span class="protocol-badge">Tuic</span>
                <span class="protocol-badge">AnyTLS</span>
                <span class="protocol-badge">Socks</span>
            </p>
            <p>åŸºäº JavaScript åœ¨æœ¬åœ°æµè§ˆå™¨ä¸­è¿è¡Œï¼Œä¸æ¶‰åŠä»»ä½•æœåŠ¡å™¨ç«¯ä¸Šä¼ æˆ–å­˜å‚¨æ“ä½œï¼Œæ— éœ€æ‹…å¿ƒèŠ‚ç‚¹æ³„éœ²é£é™©ã€‚</p>
        </header>
        <div class="card">
            <h2>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd"
                        d="M7.84 1.804A1 1 0 0 1 8.82 1h2.36a1 1 0 0 1 .98.804l.331 1.652a6.993 6.993 0 0 1 1.894 1.21l1.488-.744a1 1 0 0 1 1.293.303l1.18 2.043a1 1 0 0 1-.303 1.293l-1.488.744a7.04 7.04 0 0 1 0 2.42l1.488.744a1 1 0 0 1 .303 1.293l-1.18 2.043a1 1 0 0 1-1.293.303l-1.488-.744a6.993 6.993 0 0 1-1.894 1.21l-.331 1.652A1 1 0 0 1 11.18 19H8.82a1 1 0 0 1-.98-.804l-.331-1.652a6.993 6.993 0 0 1-1.894-1.21l-1.488.744a1 1 0 0 1-1.293-.303L1.68 12.93a1 1 0 0 1 .303-1.293l1.488-.744a7.04 7.04 0 0 1 0-2.42L1.983 7.73a1 1 0 0 1-.303-1.293L2.86 4.394a1 1 0 0 1 1.293-.303l1.488.744A6.993 6.993 0 0 1 7.53 3.622l.33-1.652ZM10 13a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"
                        clip-rule="evenodd" />
                </svg>
                å‘½åè§„åˆ™é…ç½®
            </h2>
            <div class="config-grid">
                <div class="form-group">
                    <label for="baseName">åŸºç¡€åç§° {baseName}</label>
                    <input type="text" id="baseName" value="YoungYannick" placeholder="ä¾‹å¦‚ï¼šæˆ‘çš„æ—¥æœ¬èŠ‚ç‚¹">
                </div>
                <div class="form-group">
                    <label for="suffixStart">åºå·èµ·å§‹å€¼ {suffix}</label>
                    <input type="number" id="suffixStart" value="1" min="0">
                </div>
                <div class="form-group">
                    <label for="flagSource">æ——å¸œè¯†åˆ«ä¾æ®</label>
                    <select id="flagSource">
                        <option value="originalName" selected>åŸå§‹åç§°</option>
                        <option value="baseName">åŸºç¡€åç§°</option>
                    </select>
                </div>
                <div class="form-group full-width">
                    <label for="nameFormat">å‘½åæ ¼å¼ (å¯æ‰‹åŠ¨è¾“å…¥)</label>
                    <input type="text" id="nameFormat" value="{flag} {baseName} - {protocol} {suffix}">
                    <div class="format-tags">
                        å¯ç”¨å‚æ•°: <code>{flag}</code> <code>{baseName}</code> <code>{protocol}</code> <code>{suffix}</code>
                        <code>{originalName}</code>
                    </div>
                </div>
                <div class="form-group full-width">
                    <label for="presetFormats">é€‰æ‹©é¢„è®¾æ ¼å¼</label>
                    <select id="presetFormats">
                        <option value="{flag} {baseName} - {protocol} {suffix}">[å¸¸ç”¨] æ——å¸œ åŸºç¡€å - åè®® åºå·</option>
                        <option value="{flag} {baseName} - {suffix}">[å¸¸ç”¨] æ——å¸œ åŸºç¡€å - åºå·</option>
                        <option value="{originalName}">[ç‰¹æ®Š] ä»…åŸå§‹åç§°</option>
                        <option value="{flag} {originalName}">[ç‰¹æ®Š] æ——å¸œ åŸå§‹åç§°</option>
                        <option value="{flag} {originalName} - {suffix}">[ç‰¹æ®Š] æ——å¸œ åŸå§‹åç§° - åºå·</option>
                    </select>
                </div>
                <div class="form-group full-width" id="namePreviewBox">
                    <label for="namePreview">å‘½åæ ¼å¼é¢„è§ˆ</label>
                    <div id="namePreview"></div>
                </div>
            </div>
        </div>
        <div class="card">
            <div class="io-grid">
                <div>
                    <h2>
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                            <path
                                d="M5.5 17a1.5 1.5 0 0 1-1.5-1.5V4.5A1.5 1.5 0 0 1 5.5 3h4.75a.75.75 0 0 1 0 1.5H5.5a.5.5 0 0 0-.5.5v11a.5.5 0 0 0 .5.5h11a.5.5 0 0 0 .5-.5V11a.75.75 0 0 1 1.5 0v4.5a1.5 1.5 0 0 1-1.5-1.5h-11Z" />
                            <path
                                d="M11.5 3.75a.75.75 0 0 1 .75-.75h2.5a.75.75 0 0 1 .75.75v2.5a.75.75 0 0 1-1.5 0V5.56l-5.72 5.72a.75.75 0 0 1-1.06-1.06l5.72-5.72H12.25a.75.75 0 0 1-.75-.75Z" />
                        </svg>
                        è¾“å…¥åŒºåŸŸ
                    </h2>
                    <textarea id="inputNodes" placeholder="åœ¨æ­¤å¤„ç²˜è´´æ‚¨çš„ä»£ç†èŠ‚ç‚¹ï¼Œæ¯è¡Œä¸€ä¸ª..."></textarea>
                </div>
                <div class="tabs-container">
                    <h2>
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd"
                                d="M10 18a8 8 0 1 0 0-16 8 8 0 0 0 0 16Zm3.857-9.809a.75.75 0 0 0-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 1 0-1.06 1.061l2.5 2.5a.75.75 0 0 0 1.137-.089l4-5.5Z"
                                clip-rule="evenodd" />
                        </svg>
                        ç»“æœåŒºåŸŸ
                    </h2>
                    <div class="tabs-nav">
                        <div class="tab-item active" data-tab="comparison">é‡å‘½åé¢„è§ˆ</div>
                        <div class="tab-item" data-tab="output">è¾“å‡ºç»“æœ</div>
                        <div class="tab-item" data-tab="analysis">èŠ‚ç‚¹åˆ†æ</div>
                    </div>
                    <div class="tab-content">
                        <div class="tab-pane" id="tab-output">
                            <textarea id="outputNodes" readonly placeholder=""></textarea>
                        </div>
                        <div class="tab-pane active" id="tab-comparison">
                            <div id="comparisonList"></div>
                        </div>
                        <div class="tab-pane" id="tab-analysis">
                            <div id="analysisResult"></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="main-actions">
                <button id="processBtn" class="btn btn-primary">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd"
                            d="M15.312 11.342a1.25 1.25 0 0 1 0 1.768l-2.122 2.121-1.06-1.061 2.121-2.121a1.25 1.25 0 0 1 1.061 0Zm-2.828-2.828-2.122 2.121-1.06-1.061 2.121-2.121a1.25 1.25 0 1 1 1.768 1.768Zm-4.242 5.656-1.061-1.06 2.122-2.122a1.25 1.25 0 0 0-1.768-1.768L5.342 15.312a1.25 1.25 0 0 0 0 1.768l2.12 2.121a1.25 1.25 0 0 0 1.768 0l2.121-2.121-1.06-1.06-2.122 2.121Z"
                            clip-rule="evenodd" />
                        <path
                            d="M10.707 3.293a1 1 0 0 0-1.414 0L3.293 9.293a1 1 0 1 0 1.414 1.414L10 5.414l5.293 5.293a1 1 0 0 0 1.414-1.414l-6-6Z" />
                    </svg>
                    å¼€å§‹é‡å‘½å
                </button>
                <button id="copyBtn" class="btn btn-secondary">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                        <path
                            d="M7 3.5A1.5 1.5 0 0 1 8.5 2h3.879a1.5 1.5 0 0 1 1.06.44l3.122 3.121A1.5 1.5 0 0 1 17 6.621V16.5A1.5 1.5 0 0 1 15.5 18h-8A1.5 1.5 0 0 1 6 16.5v-13A1.5 1.5 0 0 1 7 3.5ZM8.5 3a.5.5 0 0 0-.5.5v13a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5V6.621a.5.5 0 0 0-.146-.353l-3.121-3.122A.5.5 0 0 0 12.379 3H8.5Z" />
                        <path
                            d="M4.5 5A1.5 1.5 0 0 0 3 6.5v10A1.5 1.5 0 0 0 4.5 18h8a1.5 1.5 0 0 0 1.5-1.5v-2a.75.75 0 0 1-1.5 0v2a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1-.5-.5v-10a.5.5 0 0 1 .5-.5h2a.75.75 0 0 1 0 1.5h-2Z" />
                    </svg>
                    å¤åˆ¶ç»“æœ
                </button>
                <button id="clearBtn" class="btn btn-danger">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd"
                            d="M8.75 1A2.75 2.75 0 0 0 6 3.75V4.5h8V3.75A2.75 2.75 0 0 0 11.25 1h-2.5ZM10 6a.75.75 0 0 1 .75.75v7.5a.75.75 0 0 1-1.5 0v-7.5A.75.75 0 0 1 10 6ZM4.5 6a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h11a1 1 0 0 0 1-1V7a1 1 0 0 0-1-1h-11Z"
                            clip-rule="evenodd" />
                    </svg>
                    ä¸€é”®æ¸…ç©º
                </button>
            </div>
        </div>
        <footer>
            <p>Â© 2025 - Powered By <span>Yannick Young</span></p>
        </footer>
    </div>
    <div id="notification">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd"
                d="M10 18a8 8 0 1 0 0-16 8 8 0 0 0 0 16Zm3.857-9.809a.75.75 0 0 0-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 1 0-1.06 1.061l2.5 2.5a.75.75 0 0 0 1.137-.089l4-5.5Z"
                clip-rule="evenodd" />
        </svg>
        <span></span>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const baseNameInput = document.getElementById('baseName');
            const suffixStartInput = document.getElementById('suffixStart');
            const flagSourceSelect = document.getElementById('flagSource');
            const nameFormatInput = document.getElementById('nameFormat');
            const presetFormatsSelect = document.getElementById('presetFormats');
            const inputNodesTextarea = document.getElementById('inputNodes');
            const outputNodesTextarea = document.getElementById('outputNodes');
            const processBtn = document.getElementById('processBtn');
            const copyBtn = document.getElementById('copyBtn');
            const clearBtn = document.getElementById('clearBtn');
            const notification = document.getElementById('notification');
            const notificationText = notification.querySelector('span');
            const namePreview = document.getElementById('namePreview');
            const comparisonList = document.getElementById('comparisonList');
            const analysisResult = document.getElementById('analysisResult');
            const tabs = document.querySelectorAll('.tab-item');
            const tabPanes = document.querySelectorAll('.tab-pane');

                        const COUNTRY = {
                "AF": {"name": "é˜¿å¯Œæ±—", "en_name": "Afghanistan", "flag": "ğŸ‡¦ğŸ‡«"},
                "AX": {"name": "å¥¥å…°ç¾¤å²›", "en_name": "Ã…land Islands", "flag": "ğŸ‡¦ğŸ‡½"},
                "AL": {"name": "é˜¿å°”å·´å°¼äºš", "en_name": "Albania", "flag": "ğŸ‡¦ğŸ‡±"},
                "DZ": {"name": "é˜¿å°”åŠåˆ©äºš", "en_name": "Algeria", "flag": "ğŸ‡©ğŸ‡¿"},
                "AS": {"name": "ç¾å±è¨æ‘©äºš", "en_name": "American Samoa", "flag": "ğŸ‡¦ğŸ‡¸"},
                "AD": {"name": "å®‰é“å°”", "en_name": "Andorra", "flag": "ğŸ‡¦ğŸ‡©"},
                "AO": {"name": "å®‰å“¥æ‹‰", "en_name": "Angola", "flag": "ğŸ‡¦ğŸ‡´"},
                "AI": {"name": "å®‰åœ­æ‹‰", "en_name": "Anguilla", "flag": "ğŸ‡¦ğŸ‡®"},
                "AQ": {"name": "å—ææ´²", "en_name": "Antarctica", "flag": "ğŸ‡¦ğŸ‡¶"},
                "AG": {"name": "å®‰æç“œå’Œå·´å¸ƒè¾¾", "en_name": "Antigua and Barbuda", "flag": "ğŸ‡¦ğŸ‡¬"},
                "AR": {"name": "é˜¿æ ¹å»·", "en_name": "Argentina", "flag": "ğŸ‡¦ğŸ‡·"},
                "AM": {"name": "äºšç¾å°¼äºš", "en_name": "Armenia", "flag": "ğŸ‡¦ğŸ‡²"},
                "AW": {"name": "é˜¿é²å·´", "en_name": "Aruba", "flag": "ğŸ‡¦ğŸ‡¼"},
                "AU": {"name": "æ¾³å¤§åˆ©äºš", "en_name": "Australia", "flag": "ğŸ‡¦ğŸ‡º"},
                "AT": {"name": "å¥¥åœ°åˆ©", "en_name": "Austria", "flag": "ğŸ‡¦ğŸ‡¹"},
                "AZ": {"name": "é˜¿å¡æ‹œç–†", "en_name": "Azerbaijan", "flag": "ğŸ‡¦ğŸ‡¿"},
                "BS": {"name": "å·´å“ˆé©¬", "en_name": "Bahamas", "flag": "ğŸ‡§ğŸ‡¸"},
                "BH": {"name": "å·´æ—", "en_name": "Bahrain", "flag": "ğŸ‡§ğŸ‡­"},
                "BD": {"name": "å­ŸåŠ æ‹‰å›½", "en_name": "Bangladesh", "flag": "ğŸ‡§ğŸ‡©"},
                "BB": {"name": "å·´å·´å¤šæ–¯", "en_name": "Barbados", "flag": "ğŸ‡§ğŸ‡§"},
                "BY": {"name": "ç™½ä¿„ç½—æ–¯", "en_name": "Belarus", "flag": "ğŸ‡§ğŸ‡¾"},
                "BE": {"name": "æ¯”åˆ©æ—¶", "en_name": "Belgium", "flag": "ğŸ‡§ğŸ‡ª"},
                "BZ": {"name": "ä¼¯åˆ©å…¹", "en_name": "Belize", "flag": "ğŸ‡§ğŸ‡¿"},
                "BJ": {"name": "è´å®", "en_name": "Benin", "flag": "ğŸ‡§ğŸ‡¯"},
                "BM": {"name": "ç™¾æ…•å¤§", "en_name": "Bermuda", "flag": "ğŸ‡§ğŸ‡²"},
                "BT": {"name": "ä¸ä¸¹", "en_name": "Bhutan", "flag": "ğŸ‡§ğŸ‡¹"},
                "BO": {"name": "ç»åˆ©ç»´äºš", "en_name": "Bolivia", "flag": "ğŸ‡§ğŸ‡´"},
                "BQ": {"name": "åšå¥ˆå°”ã€åœ£å°¤æ–¯ç‰¹æ­‡æ–¯å’Œè¨å·´", "en_name": "Bonaire, Sint Eustatius and Saba", "flag": "ğŸ‡§ğŸ‡¶"},
                "BA": {"name": "æ³¢æ–¯å°¼äºšå’Œé»‘å¡å“¥ç»´é‚£", "en_name": "Bosnia and Herzegovina", "flag": "ğŸ‡§ğŸ‡¦"},
                "BW": {"name": "åšèŒ¨ç“¦çº³", "en_name": "Botswana", "flag": "ğŸ‡§ğŸ‡¼"},
                "BV": {"name": "å¸ƒç»´å²›", "en_name": "Bouvet Island", "flag": "ğŸ‡§ğŸ‡»"},
                "BR": {"name": "å·´è¥¿", "en_name": "Brazil", "flag": "ğŸ‡§ğŸ‡·"},
                "IO": {"name": "è‹±å±å°åº¦æ´‹é¢†åœ°", "en_name": "British Indian Ocean Territory", "flag": "ğŸ‡®ğŸ‡´"},
                "BN": {"name": "æ–‡è±", "en_name": "Brunei Darussalam", "flag": "ğŸ‡§ğŸ‡³"},
                "BG": {"name": "ä¿åŠ åˆ©äºš", "en_name": "Bulgaria", "flag": "ğŸ‡§ğŸ‡¬"},
                "BF": {"name": "å¸ƒåŸºçº³æ³•ç´¢", "en_name": "Burkina Faso", "flag": "ğŸ‡§ğŸ‡«"},
                "BI": {"name": "å¸ƒéš†è¿ª", "en_name": "Burundi", "flag": "ğŸ‡§ğŸ‡®"},
                "CV": {"name": "ä½›å¾—è§’", "en_name": "Cabo Verde", "flag": "ğŸ‡¨ğŸ‡»"},
                "KH": {"name": "æŸ¬åŸ”å¯¨", "en_name": "Cambodia", "flag": "ğŸ‡°ğŸ‡­"},
                "CM": {"name": "å–€éº¦éš†", "en_name": "Cameroon", "flag": "ğŸ‡¨ğŸ‡²"},
                "CA": {"name": "åŠ æ‹¿å¤§", "en_name": "Canada", "flag": "ğŸ‡¨ğŸ‡¦"},
                "KY": {"name": "å¼€æ›¼ç¾¤å²›", "en_name": "Cayman Islands", "flag": "ğŸ‡°ğŸ‡¾"},
                "CF": {"name": "ä¸­éå…±å’Œå›½", "en_name": "Central African Republic", "flag": "ğŸ‡¨ğŸ‡«"},
                "TD": {"name": "ä¹å¾—", "en_name": "Chad", "flag": "ğŸ‡¹ğŸ‡©"},
                "CL": {"name": "æ™ºåˆ©", "en_name": "Chile", "flag": "ğŸ‡¨ğŸ‡±"},
                "CN": {"name": "ä¸­å›½", "en_name": "China", "flag": "ğŸ‡¨ğŸ‡³"},
				"TW": {"name": "å°æ¹¾", "en_name": "TaiWan", "flag": "ğŸ‡¹ğŸ‡¼"},
                "CX": {"name": "åœ£è¯å²›", "en_name": "Christmas Island", "flag": "ğŸ‡¨ğŸ‡½"},
                "CC": {"name": "ç§‘ç§‘æ–¯ï¼ˆåŸºæ—ï¼‰ç¾¤å²›", "en_name": "Cocos (Keeling) Islands", "flag": "ğŸ‡¨ğŸ‡¨"},
                "CO": {"name": "å“¥ä¼¦æ¯”äºš", "en_name": "Colombia", "flag": "ğŸ‡¨ğŸ‡´"},
                "KM": {"name": "ç§‘æ‘©ç½—", "en_name": "Comoros", "flag": "ğŸ‡°ğŸ‡²"},
                "CG": {"name": "åˆšæœï¼ˆå¸ƒï¼‰", "en_name": "Congo", "flag": "ğŸ‡¨ğŸ‡¬"},
                "CD": {"name": "åˆšæœï¼ˆé‡‘ï¼‰", "en_name": "Congo (Democratic Republic of the)", "flag": "ğŸ‡¨ğŸ‡©"},
                "CK": {"name": "åº“å…‹ç¾¤å²›", "en_name": "Cook Islands", "flag": "ğŸ‡¨ğŸ‡°"},
                "CR": {"name": "å“¥æ–¯è¾¾é»åŠ ", "en_name": "Costa Rica", "flag": "ğŸ‡¨ğŸ‡·"},
                "CI": {"name": "ç§‘ç‰¹è¿ªç“¦", "en_name": "CÃ´te d'Ivoire", "flag": "ğŸ‡¨ğŸ‡®"},
                "HR": {"name": "å…‹ç½—åœ°äºš", "en_name": "Croatia", "flag": "ğŸ‡­ğŸ‡·"},
                "CU": {"name": "å¤å·´", "en_name": "Cuba", "flag": "ğŸ‡¨ğŸ‡º"},
                "CW": {"name": "åº“æ‹‰ç´¢", "en_name": "CuraÃ§ao", "flag": "ğŸ‡¨ğŸ‡¼"},
                "CY": {"name": "å¡æµ¦è·¯æ–¯", "en_name": "Cyprus", "flag": "ğŸ‡¨ğŸ‡¾"},
                "CZ": {"name": "æ·å…‹", "en_name": "Czechia", "flag": "ğŸ‡¨ğŸ‡¿"},
                "DK": {"name": "ä¸¹éº¦", "en_name": "Denmark", "flag": "ğŸ‡©ğŸ‡°"},
                "DJ": {"name": "å‰å¸ƒæ", "en_name": "Djibouti", "flag": "ğŸ‡©ğŸ‡¯"},
                "DM": {"name": "å¤šç±³å°¼å…‹", "en_name": "Dominica", "flag": "ğŸ‡©ğŸ‡²"},
                "DO": {"name": "å¤šç±³å°¼åŠ å…±å’Œå›½", "en_name": "Dominican Republic", "flag": "ğŸ‡©ğŸ‡´"},
                "EC": {"name": "å„ç“œå¤šå°”", "en_name": "Ecuador", "flag": "ğŸ‡ªğŸ‡¨"},
                "EG": {"name": "åŸƒåŠ", "en_name": "Egypt", "flag": "ğŸ‡ªğŸ‡¬"},
                "SV": {"name": "è¨å°”ç“¦å¤š", "en_name": "El Salvador", "flag": "ğŸ‡¸ğŸ‡»"},
                "GQ": {"name": "èµ¤é“å‡ å†…äºš", "en_name": "Equatorial Guinea", "flag": "ğŸ‡¬ğŸ‡¶"},
                "ER": {"name": "å„ç«‹ç‰¹é‡Œäºš", "en_name": "Eritrea", "flag": "ğŸ‡ªğŸ‡·"},
                "EE": {"name": "çˆ±æ²™å°¼äºš", "en_name": "Estonia", "flag": "ğŸ‡ªğŸ‡ª"},
                "SZ": {"name": "æ–¯å¨å£«å…°", "en_name": "Eswatini", "flag": "ğŸ‡¸ğŸ‡¿"},
                "ET": {"name": "åŸƒå¡ä¿„æ¯”äºš", "en_name": "Ethiopia", "flag": "ğŸ‡ªğŸ‡¹"},
                "FK": {"name": "ç¦å…‹å…°ç¾¤å²›ï¼ˆé©¬å°”ç»´çº³æ–¯ï¼‰", "en_name": "Falkland Islands (Malvinas)", "flag": "ğŸ‡«ğŸ‡°"},
                "FO": {"name": "æ³•ç½—ç¾¤å²›", "en_name": "Faroe Islands", "flag": "ğŸ‡«ğŸ‡´"},
                "FJ": {"name": "æ–æµ", "en_name": "Fiji", "flag": "ğŸ‡«ğŸ‡¯"},
                "FI": {"name": "èŠ¬å…°", "en_name": "Finland", "flag": "ğŸ‡«ğŸ‡®"},
                "FR": {"name": "æ³•å›½", "en_name": "France", "flag": "ğŸ‡«ğŸ‡·"},
                "GF": {"name": "æ³•å±åœ­äºšé‚£", "en_name": "French Guiana", "flag": "ğŸ‡¬ğŸ‡«"},
                "PF": {"name": "æ³•å±æ³¢åˆ©å°¼è¥¿äºš", "en_name": "French Polynesia", "flag": "ğŸ‡µğŸ‡«"},
                "TF": {"name": "æ³•å±å—éƒ¨é¢†åœ°", "en_name": "French Southern Territories", "flag": "ğŸ‡¹ğŸ‡«"},
                "GA": {"name": "åŠ è“¬", "en_name": "Gabon", "flag": "ğŸ‡¬ğŸ‡¦"},
                "GM": {"name": "å†ˆæ¯”äºš", "en_name": "Gambia", "flag": "ğŸ‡¬ğŸ‡²"},
                "GE": {"name": "æ ¼é²å‰äºš", "en_name": "Georgia", "flag": "ğŸ‡¬ğŸ‡ª"},
                "DE": {"name": "å¾·å›½", "en_name": "Germany", "flag": "ğŸ‡©ğŸ‡ª"},
                "GH": {"name": "åŠ çº³", "en_name": "Ghana", "flag": "ğŸ‡¬ğŸ‡­"},
                "GI": {"name": "ç›´å¸ƒç½—é™€", "en_name": "Gibraltar", "flag": "ğŸ‡¬ğŸ‡®"},
                "GR": {"name": "å¸Œè…Š", "en_name": "Greece", "flag": "ğŸ‡¬ğŸ‡·"},
                "GL": {"name": "æ ¼é™µå…°", "en_name": "Greenland", "flag": "ğŸ‡¬ğŸ‡±"},
                "GD": {"name": "æ ¼æ—çº³è¾¾", "en_name": "Grenada", "flag": "ğŸ‡¬ğŸ‡©"},
                "GP": {"name": "ç“œå¾·ç½—æ™®", "en_name": "Guadeloupe", "flag": "ğŸ‡¬ğŸ‡µ"},
                "GU": {"name": "å…³å²›", "en_name": "Guam", "flag": "ğŸ‡¬ğŸ‡º"},
                "GT": {"name": "å±åœ°é©¬æ‹‰", "en_name": "Guatemala", "flag": "ğŸ‡¬ğŸ‡¹"},
                "GG": {"name": "æ ¹è¥¿", "en_name": "Guernsey", "flag": "ğŸ‡¬ğŸ‡¬"},
                "GN": {"name": "å‡ å†…äºš", "en_name": "Guinea", "flag": "ğŸ‡¬ğŸ‡³"},
                "GW": {"name": "å‡ å†…äºšæ¯”ç»", "en_name": "Guinea-Bissau", "flag": "ğŸ‡¬ğŸ‡¼"},
                "GY": {"name": "åœ­äºšé‚£", "en_name": "Guyana", "flag": "ğŸ‡¬ğŸ‡¾"},
                "HT": {"name": "æµ·åœ°", "en_name": "Haiti", "flag": "ğŸ‡­ğŸ‡¹"},
                "HM": {"name": "èµ«å¾·å²›å’Œéº¦å…‹å”çº³ç¾¤å²›", "en_name": "Heard Island and McDonald Islands", "flag": "ğŸ‡­ğŸ‡²"},
                "VA": {"name": "æ¢µè’‚å†ˆ", "en_name": "Holy See", "flag": "ğŸ‡»ğŸ‡¦"},
                "HN": {"name": "æ´ªéƒ½æ‹‰æ–¯", "en_name": "Honduras", "flag": "ğŸ‡­ğŸ‡³"},
                "HK": {"name": "é¦™æ¸¯", "en_name": "Hong Kong", "flag": "ğŸ‡­ğŸ‡°"},
                "HU": {"name": "åŒˆç‰™åˆ©", "en_name": "Hungary", "flag": "ğŸ‡­ğŸ‡º"},
                "IS": {"name": "å†°å²›", "en_name": "Iceland", "flag": "ğŸ‡®ğŸ‡¸"},
                "IN": {"name": "å°åº¦", "en_name": "India", "flag": "ğŸ‡®ğŸ‡³"},
                "ID": {"name": "å°åº¦å°¼è¥¿äºš", "en_name": "Indonesia", "flag": "ğŸ‡®ğŸ‡©"},
                "IR": {"name": "ä¼Šæœ—", "en_name": "Iran", "flag": "ğŸ‡®ğŸ‡·"},
                "IQ": {"name": "ä¼Šæ‹‰å…‹", "en_name": "Iraq", "flag": "ğŸ‡®ğŸ‡¶"},
                "IE": {"name": "çˆ±å°”å…°", "en_name": "Ireland", "flag": "ğŸ‡®ğŸ‡ª"},
                "IM": {"name": "é©¬æ©å²›", "en_name": "Isle of Man", "flag": "ğŸ‡®ğŸ‡²"},
                "IL": {"name": "ä»¥è‰²åˆ—", "en_name": "Israel", "flag": "ğŸ‡®ğŸ‡±"},
                "IT": {"name": "æ„å¤§åˆ©", "en_name": "Italy", "flag": "ğŸ‡®ğŸ‡¹"},
                "JM": {"name": "ç‰™ä¹°åŠ ", "en_name": "Jamaica", "flag": "ğŸ‡¯ğŸ‡²"},
                "JP": {"name": "æ—¥æœ¬", "en_name": "Japan", "flag": "ğŸ‡¯ğŸ‡µ"},
                "JE": {"name": "æ³½è¥¿", "en_name": "Jersey", "flag": "ğŸ‡¯ğŸ‡ª"},
                "JO": {"name": "çº¦æ—¦", "en_name": "Jordan", "flag": "ğŸ‡¯ğŸ‡´"},
                "KZ": {"name": "å“ˆè¨å…‹æ–¯å¦", "en_name": "Kazakhstan", "flag": "ğŸ‡°ğŸ‡¿"},
                "KE": {"name": "è‚¯å°¼äºš", "en_name": "Kenya", "flag": "ğŸ‡°ğŸ‡ª"},
                "KI": {"name": "åŸºé‡Œå·´æ–¯", "en_name": "Kiribati", "flag": "ğŸ‡°ğŸ‡®"},
                "KP": {"name": "æœé²œ", "en_name": "Korea (Democratic People's Republic of)", "flag": "ğŸ‡°ğŸ‡µ"},
                "KR": {"name": "éŸ©å›½", "en_name": "Korea (Republic of)", "flag": "ğŸ‡°ğŸ‡·"},
                "KW": {"name": "ç§‘å¨ç‰¹", "en_name": "Kuwait", "flag": "ğŸ‡°ğŸ‡¼"},
                "KG": {"name": "å‰å°”å‰æ–¯æ–¯å¦", "en_name": "Kyrgyzstan", "flag": "ğŸ‡°ğŸ‡¬"},
                "LA": {"name": "è€æŒ", "en_name": "Lao People's Democratic Republic", "flag": "ğŸ‡±ğŸ‡¦"},
                "LV": {"name": "æ‹‰è„±ç»´äºš", "en_name": "Latvia", "flag": "ğŸ‡±ğŸ‡»"},
                "LB": {"name": "é»å·´å«©", "en_name": "Lebanon", "flag": "ğŸ‡±ğŸ‡§"},
                "LS": {"name": "è±ç´¢æ‰˜", "en_name": "Lesotho", "flag": "ğŸ‡±ğŸ‡¸"},
                "LR": {"name": "åˆ©æ¯”é‡Œäºš", "en_name": "Liberia", "flag": "ğŸ‡±ğŸ‡·"},
                "LY": {"name": "åˆ©æ¯”äºš", "en_name": "Libya", "flag": "ğŸ‡±ğŸ‡¾"},
                "LI": {"name": "åˆ—æ”¯æ•¦å£«ç™»", "en_name": "Liechtenstein", "flag": "ğŸ‡±ğŸ‡®"},
                "LT": {"name": "ç«‹é™¶å®›", "en_name": "Lithuania", "flag": "ğŸ‡±ğŸ‡¹"},
                "LU": {"name": "å¢æ£®å ¡", "en_name": "Luxembourg", "flag": "ğŸ‡±ğŸ‡º"},
                "MO": {"name": "ä¸­å›½æ¾³é—¨", "en_name": "Macao", "flag": "ğŸ‡²ğŸ‡´"},
                "MG": {"name": "é©¬è¾¾åŠ æ–¯åŠ ", "en_name": "Madagascar", "flag": "ğŸ‡²ğŸ‡¬"},
                "MW": {"name": "é©¬æ‹‰ç»´", "en_name": "Malawi", "flag": "ğŸ‡²ğŸ‡¼"},
                "MY": {"name": "é©¬æ¥è¥¿äºš", "en_name": "Malaysia", "flag": "ğŸ‡²ğŸ‡¾"},
                "MV": {"name": "é©¬å°”ä»£å¤«", "en_name": "Maldives", "flag": "ğŸ‡²ğŸ‡»"},
                "ML": {"name": "é©¬é‡Œ", "en_name": "Mali", "flag": "ğŸ‡²ğŸ‡±"},
                "MT": {"name": "é©¬è€³ä»–", "en_name": "Malta", "flag": "ğŸ‡²ğŸ‡¹"},
                "MH": {"name": "é©¬ç»å°”ç¾¤å²›", "en_name": "Marshall Islands", "flag": "ğŸ‡²ğŸ‡­"},
                "MQ": {"name": "é©¬æå°¼å…‹", "en_name": "Martinique", "flag": "ğŸ‡²ğŸ‡¶"},
                "MR": {"name": "æ¯›é‡Œå¡”å°¼äºš", "en_name": "Mauritania", "flag": "ğŸ‡²ğŸ‡·"},
                "MU": {"name": "æ¯›é‡Œæ±‚æ–¯", "en_name": "Mauritius", "flag": "ğŸ‡²ğŸ‡º"},
                "YT": {"name": "é©¬çº¦ç‰¹", "en_name": "Mayotte", "flag": "ğŸ‡¾ğŸ‡¹"},
                "MX": {"name": "å¢¨è¥¿å“¥", "en_name": "Mexico", "flag": "ğŸ‡²ğŸ‡½"},
                "FM": {"name": "å¯†å…‹ç½—å°¼è¥¿äºš", "en_name": "Micronesia (Federated States of)", "flag": "ğŸ‡«ğŸ‡²"},
                "MD": {"name": "æ‘©å°”å¤šç“¦", "en_name": "Moldova (Republic of)", "flag": "ğŸ‡²ğŸ‡©"},
                "MC": {"name": "æ‘©çº³å“¥", "en_name": "Monaco", "flag": "ğŸ‡²ğŸ‡¨"},
                "MN": {"name": "è’™å¤", "en_name": "Mongolia", "flag": "ğŸ‡²ğŸ‡³"},
                "ME": {"name": "é»‘å±±", "en_name": "Montenegro", "flag": "ğŸ‡²ğŸ‡ª"},
                "MS": {"name": "è’™ç‰¹å¡æ‹‰ç‰¹", "en_name": "Montserrat", "flag": "ğŸ‡²ğŸ‡¸"},
                "MA": {"name": "æ‘©æ´›å“¥", "en_name": "Morocco", "flag": "ğŸ‡²ğŸ‡¦"},
                "MZ": {"name": "è«æ¡‘æ¯”å…‹", "en_name": "Mozambique", "flag": "ğŸ‡²ğŸ‡¿"},
                "MM": {"name": "ç¼…ç”¸", "en_name": "Myanmar", "flag": "ğŸ‡²ğŸ‡²"},
                "NA": {"name": "çº³ç±³æ¯”äºš", "en_name": "Namibia", "flag": "ğŸ‡³ğŸ‡¦"},
                "NR": {"name": "ç‘™é²", "en_name": "Nauru", "flag": "ğŸ‡³ğŸ‡·"},
                "NP": {"name": "å°¼æ³Šå°”", "en_name": "Nepal", "flag": "ğŸ‡³ğŸ‡µ"},
                "NL": {"name": "è·å…°", "en_name": "Netherlands", "flag": "ğŸ‡³ğŸ‡±"},
                "NC": {"name": "æ–°å–€é‡Œå¤šå°¼äºš", "en_name": "New Caledonia", "flag": "ğŸ‡³ğŸ‡¨"},
                "NZ": {"name": "æ–°è¥¿å…°", "en_name": "New Zealand", "flag": "ğŸ‡³ğŸ‡¿"},
                "NI": {"name": "å°¼åŠ æ‹‰ç“œ", "en_name": "Nicaragua", "flag": "ğŸ‡³ğŸ‡®"},
                "NE": {"name": "å°¼æ—¥å°”", "en_name": "Niger", "flag": "ğŸ‡³ğŸ‡ª"},
                "NG": {"name": "å°¼æ—¥åˆ©äºš", "en_name": "Nigeria", "flag": "ğŸ‡³ğŸ‡¬"},
                "NU": {"name": "çº½åŸƒ", "en_name": "Niue", "flag": "ğŸ‡³ğŸ‡º"},
                "NF": {"name": "è¯ºç¦å…‹å²›", "en_name": "Norfolk Island", "flag": "ğŸ‡³ğŸ‡«"},
                "MK": {"name": "åŒ—é©¬å…¶é¡¿", "en_name": "North Macedonia", "flag": "ğŸ‡²ğŸ‡°"},
                "MP": {"name": "åŒ—é©¬é‡Œäºšçº³ç¾¤å²›", "en_name": "Northern Mariana Islands", "flag": "ğŸ‡²ğŸ‡µ"},
                "NO": {"name": "æŒªå¨", "en_name": "Norway", "flag": "ğŸ‡³ğŸ‡´"},
                "OM": {"name": "é˜¿æ›¼", "en_name": "Oman", "flag": "ğŸ‡´ğŸ‡²"},
                "PK": {"name": "å·´åŸºæ–¯å¦", "en_name": "Pakistan", "flag": "ğŸ‡µğŸ‡°"},
                "PW": {"name": "å¸•åŠ³", "en_name": "Palau", "flag": "ğŸ‡µğŸ‡¼"},
                "PS": {"name": "å·´å‹’æ–¯å¦", "en_name": "Palestine, State of", "flag": "ğŸ‡µğŸ‡¸"},
                "PA": {"name": "å·´æ‹¿é©¬", "en_name": "Panama", "flag": "ğŸ‡µğŸ‡¦"},
                "PG": {"name": "å·´å¸ƒäºšæ–°å‡ å†…äºš", "en_name": "Papua New Guinea", "flag": "ğŸ‡µğŸ‡¬"},
                "PY": {"name": "å·´æ‹‰åœ­", "en_name": "Paraguay", "flag": "ğŸ‡µğŸ‡¾"},
                "PE": {"name": "ç§˜é²", "en_name": "Peru", "flag": "ğŸ‡µğŸ‡ª"},
                "PH": {"name": "è²å¾‹å®¾", "en_name": "Philippines", "flag": "ğŸ‡µğŸ‡­"},
                "PN": {"name": "çš®ç‰¹å‡¯æ©", "en_name": "Pitcairn", "flag": "ğŸ‡µğŸ‡³"},
                "PL": {"name": "æ³¢å…°", "en_name": "Poland", "flag": "ğŸ‡µğŸ‡±"},
                "PT": {"name": "è‘¡è„ç‰™", "en_name": "Portugal", "flag": "ğŸ‡µğŸ‡¹"},
                "PR": {"name": "æ³¢å¤šé»å„", "en_name": "Puerto Rico", "flag": "ğŸ‡µğŸ‡·"},
                "QA": {"name": "å¡å¡”å°”", "en_name": "Qatar", "flag": "ğŸ‡¶ğŸ‡¦"},
                "RE": {"name": "ç•™å°¼æ±ª", "en_name": "RÃ©union", "flag": "ğŸ‡·ğŸ‡ª"},
                "RO": {"name": "ç½—é©¬å°¼äºš", "en_name": "Romania", "flag": "ğŸ‡·ğŸ‡´"},
                "RU": {"name": "ä¿„ç½—æ–¯", "en_name": "Russian Federation", "flag": "ğŸ‡·ğŸ‡º"},
                "RW": {"name": "å¢æ—ºè¾¾", "en_name": "Rwanda", "flag": "ğŸ‡·ğŸ‡¼"},
                "BL": {"name": "åœ£å·´æ³°å‹’ç±³", "en_name": "Saint BarthÃ©lemy", "flag": "ğŸ‡§ğŸ‡±"},
                "SH": {"name": "åœ£èµ«å‹’æ‹¿ã€é˜¿æ£®æ¾å’Œç‰¹é‡Œæ–¯å¦-è¾¾åº“å°¼äºš", "en_name": "Saint Helena, Ascension and Tristan da Cunha", "flag": "ğŸ‡¸ğŸ‡­"},
                "KN": {"name": "åœ£åŸºèŒ¨å’Œå°¼ç»´æ–¯", "en_name": "Saint Kitts and Nevis", "flag": "ğŸ‡°ğŸ‡³"},
                "LC": {"name": "åœ£å¢è¥¿äºš", "en_name": "Saint Lucia", "flag": "ğŸ‡±ğŸ‡¨"},
                "MF": {"name": "æ³•å±åœ£é©¬ä¸", "en_name": "Saint Martin (French part)", "flag": "ğŸ‡²ğŸ‡«"},
                "PM": {"name": "åœ£çš®åŸƒå°”å’Œå¯†å…‹éš†", "en_name": "Saint Pierre and Miquelon", "flag": "ğŸ‡µğŸ‡²"},
                "VC": {"name": "åœ£æ–‡æ£®ç‰¹å’Œæ ¼æ—çº³ä¸æ–¯", "en_name": "Saint Vincent and the Grenadines", "flag": "ğŸ‡»ğŸ‡¨"},
                "WS": {"name": "è¨æ‘©äºš", "en_name": "Samoa", "flag": "ğŸ‡¼ğŸ‡¸"},
                "SM": {"name": "åœ£é©¬åŠ›è¯º", "en_name": "San Marino", "flag": "ğŸ‡¸ğŸ‡²"},
                "ST": {"name": "åœ£å¤šç¾å’Œæ™®æ—è¥¿æ¯”", "en_name": "Sao Tome and Principe", "flag": "ğŸ‡¸ğŸ‡¹"},
                "SA": {"name": "æ²™ç‰¹é˜¿æ‹‰ä¼¯", "en_name": "Saudi Arabia", "flag": "ğŸ‡¸ğŸ‡¦"},
                "SN": {"name": "å¡å†…åŠ å°”", "en_name": "Senegal", "flag": "ğŸ‡¸ğŸ‡³"},
                "RS": {"name": "å¡å°”ç»´äºš", "en_name": "Serbia", "flag": "ğŸ‡·ğŸ‡¸"},
                "SC": {"name": "å¡èˆŒå°”", "en_name": "Seychelles", "flag": "ğŸ‡¸ğŸ‡¨"},
                "SL": {"name": "å¡æ‹‰åˆ©æ˜‚", "en_name": "Sierra Leone", "flag": "ğŸ‡¸ğŸ‡±"},
                "SG": {"name": "æ–°åŠ å¡", "en_name": "Singapore", "flag": "ğŸ‡¸ğŸ‡¬"},
                "SX": {"name": "è·å±åœ£é©¬ä¸", "en_name": "Sint Maarten (Dutch part)", "flag": "ğŸ‡¸ğŸ‡½"},
                "SK": {"name": "æ–¯æ´›ä¼å…‹", "en_name": "Slovakia", "flag": "ğŸ‡¸ğŸ‡°"},
                "SI": {"name": "æ–¯æ´›æ–‡å°¼äºš", "en_name": "Slovenia", "flag": "ğŸ‡¸ğŸ‡®"},
                "SB": {"name": "æ‰€ç½—é—¨ç¾¤å²›", "en_name": "Solomon Islands", "flag": "ğŸ‡¸ğŸ‡§"},
                "SO": {"name": "ç´¢é©¬é‡Œ", "en_name": "Somalia", "flag": "ğŸ‡¸ğŸ‡´"},
                "ZA": {"name": "å—é", "en_name": "South Africa", "flag": "ğŸ‡¿ğŸ‡¦"},
                "GS": {"name": "å—ä¹”æ²»äºšå’Œå—æ¡‘å¨å¥‡ç¾¤å²›", "en_name": "South Georgia and the South Sandwich Islands", "flag": "ğŸ‡¬ğŸ‡¸"},
                "SS": {"name": "å—è‹ä¸¹", "en_name": "South Sudan", "flag": "ğŸ‡¸ğŸ‡¸"},
                "ES": {"name": "è¥¿ç­ç‰™", "en_name": "Spain", "flag": "ğŸ‡ªğŸ‡¸"},
                "LK": {"name": "æ–¯é‡Œå…°å¡", "en_name": "Sri Lanka", "flag": "ğŸ‡±ğŸ‡°"},
                "SD": {"name": "è‹ä¸¹", "en_name": "Sudan", "flag": "ğŸ‡¸ğŸ‡©"},
                "SR": {"name": "è‹é‡Œå—", "en_name": "Suriname", "flag": "ğŸ‡¸ğŸ‡·"},
                "SJ": {"name": "æ–¯ç“¦å°”å·´å’Œæ‰¬é©¬å»¶", "en_name": "Svalbard and Jan Mayen", "flag": "ğŸ‡¸ğŸ‡¯"},
                "SE": {"name": "ç‘å…¸", "en_name": "Sweden", "flag": "ğŸ‡¸ğŸ‡ª"},
                "CH": {"name": "ç‘å£«", "en_name": "Switzerland", "flag": "ğŸ‡¨ğŸ‡­"},
                "SY": {"name": "å™åˆ©äºš", "en_name": "Syrian Arab Republic", "flag": "ğŸ‡¸ğŸ‡¾"},
                "TJ": {"name": "å¡”å‰å…‹æ–¯å¦", "en_name": "Tajikistan", "flag": "ğŸ‡¹ğŸ‡¯"},
                "TZ": {"name": "å¦æ¡‘å°¼äºš", "en_name": "Tanzania, United Republic of", "flag": "ğŸ‡¹ğŸ‡¿"},
                "TH": {"name": "æ³°å›½", "en_name": "Thailand", "flag": "ğŸ‡¹ğŸ‡­"},
                "TL": {"name": "ä¸œå¸æ±¶", "en_name": "Timor-Leste", "flag": "ğŸ‡¹ğŸ‡±"},
                "TG": {"name": "å¤šå“¥", "en_name": "Togo", "flag": "ğŸ‡¹ğŸ‡¬"},
                "TK": {"name": "æ‰˜å…‹åŠ³", "en_name": "Tokelau", "flag": "ğŸ‡¹ğŸ‡°"},
                "TO": {"name": "æ±¤åŠ ", "en_name": "Tonga", "flag": "ğŸ‡¹ğŸ‡´"},
                "TT": {"name": "ç‰¹ç«‹å°¼è¾¾å’Œå¤šå·´å“¥", "en_name": "Trinidad and Tobago", "flag": "ğŸ‡¹ğŸ‡¹"},
                "TN": {"name": "çªå°¼æ–¯", "en_name": "Tunisia", "flag": "ğŸ‡¹ğŸ‡³"},
                "TR": {"name": "åœŸè€³å…¶", "en_name": "Turkey", "flag": "ğŸ‡¹ğŸ‡·"},
                "TM": {"name": "åœŸåº“æ›¼æ–¯å¦", "en_name": "Turkmenistan", "flag": "ğŸ‡¹ğŸ‡²"},
                "TC": {"name": "ç‰¹å…‹æ–¯å’Œå‡¯ç§‘æ–¯ç¾¤å²›", "en_name": "Turks and Caicos Islands", "flag": "ğŸ‡¹ğŸ‡¨"},
                "TV": {"name": "å›¾ç“¦å¢", "en_name": "Tuvalu", "flag": "ğŸ‡¹ğŸ‡»"},
                "UG": {"name": "ä¹Œå¹²è¾¾", "en_name": "Uganda", "flag": "ğŸ‡ºğŸ‡¬"},
                "UA": {"name": "ä¹Œå…‹å…°", "en_name": "Ukraine", "flag": "ğŸ‡ºğŸ‡¦"},
                "AE": {"name": "é˜¿è”é…‹", "en_name": "United Arab Emirates", "flag": "ğŸ‡¦ğŸ‡ª"},
                "GB": {"name": "è‹±å›½", "en_name": "United Kingdom of Great Britain and Northern Ireland", "flag": "ğŸ‡¬ğŸ‡§"},
                "US": {"name": "ç¾å›½", "en_name": "United States of America", "flag": "ğŸ‡ºğŸ‡¸"},
                "UM": {"name": "ç¾å›½æœ¬åœŸå¤–å°å²›å±¿", "en_name": "United States Minor Outlying Islands", "flag": "ğŸ‡ºğŸ‡²"},
                "UY": {"name": "ä¹Œæ‹‰åœ­", "en_name": "Uruguay", "flag": "ğŸ‡ºğŸ‡¾"},
                "UZ": {"name": "ä¹Œå…¹åˆ«å…‹æ–¯å¦", "en_name": "Uzbekistan", "flag": "ğŸ‡ºğŸ‡¿"},
                "VU": {"name": "ç“¦åŠªé˜¿å›¾", "en_name": "Vanuatu", "flag": "ğŸ‡»ğŸ‡º"},
                "VE": {"name": "å§”å†…ç‘æ‹‰", "en_name": "Venezuela (Bolivarian Republic of)", "flag": "ğŸ‡»ğŸ‡ª"},
                "VN": {"name": "è¶Šå—", "en_name": "Viet Nam", "flag": "ğŸ‡»ğŸ‡³"},
                "VG": {"name": "è‹±å±ç»´å°”äº¬ç¾¤å²›", "en_name": "Virgin Islands (British)", "flag": "ğŸ‡»ğŸ‡¬"},
                "VI": {"name": "ç¾å±ç»´å°”äº¬ç¾¤å²›", "en_name": "Virgin Islands (U.S.)", "flag": "ğŸ‡»ğŸ‡®"},
                "WF": {"name": "ç“¦åˆ©æ–¯å’Œå¯Œå›¾çº³", "en_name": "Wallis and Futuna", "flag": "ğŸ‡¼ğŸ‡«"},
                "EH": {"name": "è¥¿æ’’å“ˆæ‹‰", "en_name": "Western Sahara", "flag": "ğŸ‡ªğŸ‡­"},
                "YE": {"name": "ä¹Ÿé—¨", "en_name": "Yemen", "flag": "ğŸ‡¾ğŸ‡ª"},
                "ZM": {"name": "èµæ¯”äºš", "en_name": "Zambia", "flag": "ğŸ‡¿ğŸ‡²"},
                "ZW": {"name": "æ´¥å·´å¸ƒéŸ¦", "en_name": "Zimbabwe", "flag": "ğŸ‡¿ğŸ‡¼"},
            }

            const allEventListeners = [
                baseNameInput, suffixStartInput, nameFormatInput, inputNodesTextarea, flagSourceSelect
            ];
            allEventListeners.forEach(el => el.addEventListener('input', updateRealtimeViews));
            processBtn.addEventListener('click', processNodes);
            copyBtn.addEventListener('click', copyOutput);
            clearBtn.addEventListener('click', clearInputs);
            presetFormatsSelect.addEventListener('change', (e) => {
                nameFormatInput.value = e.target.value;
                updateRealtimeViews();
            });

            tabs.forEach(tab => tab.addEventListener('click', () => {
                const target = tab.getAttribute('data-tab');
                tabs.forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                tabPanes.forEach(pane => {
                    pane.classList.remove('active');
                    if (pane.id === `tab-${target}`) {
                        pane.classList.add('active');
                    }
                });
            }));

            function updateRealtimeViews() {
                updatePreview();
                const { comparisonData } = getRenamingPreviewData();
                renderComparison(comparisonData);
                analyzeNodes();
            }

            function getCountryFlag(textToSearch) {
                if (!textToSearch) return '';
                const textUpper = textToSearch.toUpperCase();

                let bestMatchKeyword = '';
                let bestMatchFlag = '';

                for (const code in COUNTRY) {
                    const country = COUNTRY[code];
                    const keywords = [country.name, country.en_name];
                    for (const keyword of keywords) {
                        if (keyword && textUpper.includes(keyword.toUpperCase())) {
                            if (keyword.length > bestMatchKeyword.length) {
                                bestMatchKeyword = keyword;
                                bestMatchFlag = country.flag;
                            }
                        }
                    }
                }

                if (bestMatchFlag) {
                    return bestMatchFlag;
                }

                const codeMatches = textUpper.match(/\b([A-Z]{2})\b/g) || [];
                for (const code of codeMatches) {
                    if (COUNTRY[code]) {
                        return COUNTRY[code].flag;
                    }
                }

                return '';
            }

            function updatePreview() {
                const format = nameFormatInput.value;
                const baseName = baseNameInput.value.trim() || 'YoungYannick';
                const startIndex = parseInt(suffixStartInput.value, 10) || 1;
                const suffix = String(startIndex).padStart(2, '0');

                let previewName = format
                    .replace('{baseName}', baseName)
                    .replace('{protocol}', 'åè®®')
                    .replace('{flag}', 'ğŸ‡ºğŸ‡³')
                    .replace('{suffix}', suffix)
                    .replace('{originalName}', 'åŸå§‹åç§°');

                previewName = previewName.replace(/\s{2,}/g, ' ').trim();

                if (!previewName.trim()) {
                    previewName = 'æœªé…ç½®è§„åˆ™, å°†ä½¿ç”¨é»˜è®¤å (ä¾‹: Node-01)';
                }
                namePreview.textContent = previewName;
            }

            function getRenamingPreviewData() {
                const baseName = baseNameInput.value.trim();
                const format = nameFormatInput.value;
                const flagSource = flagSourceSelect.value;
                const startIndex = parseInt(suffixStartInput.value, 10) || 1;
                const nodes = inputNodesTextarea.value.split('\n').map(n => n.trim()).filter(n => n);

                const comparisonData = [];
                const renamedNodes = [];

                if (nodes.length === 0) return { comparisonData, renamedNodes };

                const paddingWidth = String(nodes.length + startIndex - 1).length > 1 ? String(nodes.length + startIndex - 1).length : 2;

                nodes.forEach((node, index) => {
                    const protocols = ['ss://', 'vmess://', 'vless://', 'trojan://', 'hysteria2://', 'tuic://', 'socks://', 'anytls://'];
                    let protocolUri = protocols.find(p => node.toLowerCase().startsWith(p));
                    let originalName = 'æ— åç§°';
                    let protocolName = 'æœªçŸ¥';

                    if (!protocolUri) {
                        renamedNodes.push(node);
                        comparisonData.push({ protocol: 'æœªçŸ¥', oldName: 'æ— æ³•è§£æçš„èŠ‚ç‚¹', newName: 'ä¿æŒä¸å˜' });
                        return;
                    }

                    protocolName = protocolUri.replace('://', '').toUpperCase();

                    try {
                        if (protocolUri === 'vmess://') {
                            let b64Data = node.replace('vmess://', '').split('#')[0];
                            const cleanedB64Data = b64Data.replace(/\s/g, '');
                            let standardB64 = cleanedB64Data.replace(/-/g, '+').replace(/_/g, '/');
                            standardB64 += '=='.slice(0, (4 - standardB64.length % 4) % 4);
                            const decodedStr = new TextDecoder().decode(Uint8Array.from(atob(standardB64), c => c.charCodeAt(0)));
                            const config = JSON.parse(decodedStr);
                            if (config.ps) originalName = config.ps;
                        } else {
                            const urlParts = node.split('#');
                            if (urlParts.length > 1 && urlParts[1]) originalName = decodeURIComponent(urlParts[1]);
                        }
                    } catch (e) { originalName = 'è§£æå¤±è´¥'; }

                    const textForFlagDetection = flagSource === 'baseName' ? baseName : originalName;
                    const flag = getCountryFlag(textForFlagDetection);
                    const suffix = String(startIndex + index).padStart(paddingWidth, '0');

                    let finalName = format
                        .replace('{baseName}', baseName)
                        .replace('{protocol}', protocolName)
                        .replace('{flag}', flag)
                        .replace('{suffix}', suffix)
                        .replace('{originalName}', originalName);

                    finalName = finalName.replace(/{[a-zA-Z]+}/g, '').replace(/\s*-\s*-\s*/g, ' - ').replace(/(\s-)$|^(-\s)/, '').replace(/\s{2,}/g, ' ').trim();
                    if (!finalName) finalName = `Node-${suffix}`;

                    let newUrl = '';
                    if (protocolUri === 'vmess://') newUrl = renameVmess(node, finalName);
                    else newUrl = renameSimpleProtocol(node, finalName);

                    renamedNodes.push(newUrl);
                    comparisonData.push({ protocol: protocolName, oldName: originalName, newName: finalName });
                });

                return { comparisonData, renamedNodes };
            }

            function processNodes() {
                const { renamedNodes, comparisonData } = getRenamingPreviewData();
                if (comparisonData.length === 0) {
                    showNotification('è¾“å…¥å†…å®¹ä¸ºç©ºï¼');
                    return;
                }
                outputNodesTextarea.value = renamedNodes.join('\n');
                renderComparison(comparisonData);
                showNotification('èŠ‚ç‚¹é‡å‘½åå®Œæˆï¼');
                document.querySelector('.tab-item[data-tab="output"]').click();
            }

            function analyzeNodes() {
                const nodes = inputNodesTextarea.value.split('\n').map(n => n.trim()).filter(n => n);
                const protocolCounts = {};
                const protocols = ['ss://', 'vmess://', 'vless://', 'trojan://', 'hysteria2://', 'tuic://', 'socks://', 'anytls://'];
                nodes.forEach(node => {
                    let protocolName = 'æœªçŸ¥';
                    const detectedProtocol = protocols.find(p => node.toLowerCase().startsWith(p));
                    if (detectedProtocol) protocolName = detectedProtocol.replace('://', '').toUpperCase();
                    protocolCounts[protocolName] = (protocolCounts[protocolName] || 0) + 1;
                });
                renderAnalysisReport(nodes.length, protocolCounts);
            }

            function renderAnalysisReport(total, protocols) {
                if (total === 0) {
                    analysisResult.innerHTML = ``;
                    return;
                }
                const sortedProtocols = Object.entries(protocols).sort((a, b) => b[1] - a[1]);
                let html = `
                    <h4>æ•´ä½“æ¦‚è§ˆ</h4>
                    <ul>
                        <li><span class="name">æ€»èŠ‚ç‚¹æ•°</span> <span class="count">${total}</span></li>
                        <li><span class="name">æ€»åè®®æ•°</span> <span class="count">${sortedProtocols.length}</span></li>
                    </ul>
                    <h4>åè®®åˆ†å¸ƒ</h4>
                    <ul>${sortedProtocols.map(([name, count]) => `<li><span class="name">${name}</span> <span class="count">${count}</span></li>`).join('')}</ul>`;
                analysisResult.innerHTML = html;
            }

            function renderComparison(data) {
                if (!data || data.length === 0) {
                    comparisonList.innerHTML = ``;
                    return;
                }
                const arrowSvg = `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M7.21 14.77a.75.75 0 0 1 .02-1.06L11.168 10 7.23 6.29a.75.75 0 1 1 1.04-1.08l4.5 4.25a.75.75 0 0 1 0 1.08l-4.5 4.25a.75.75 0 0 1-1.06-.02Z" clip-rule="evenodd" /></svg>`;
                const fragment = document.createDocumentFragment();
                data.forEach(item => {
                    let protocolClass = `protocol-tag--${item.protocol.toLowerCase()}`;
                    const itemEl = document.createElement('div');
                    itemEl.className = 'comparison-item';
                    itemEl.innerHTML = `
                        <div><span class="protocol-tag ${protocolClass}">${item.protocol}</span></div>
                        <span class="comparison-name original">${item.oldName}</span>
                        <div class="comparison-arrow">${arrowSvg}</div>
                        <span class="comparison-name renamed">${item.newName}</span>`;
                    fragment.appendChild(itemEl);
                });
                comparisonList.innerHTML = '';
                comparisonList.appendChild(fragment);
            }

            function clearInputs() {
                inputNodesTextarea.value = '';
                outputNodesTextarea.value = '';
                suffixStartInput.value = '1';
                showNotification('è¾“å…¥åŒºå·²æ¸…ç©º');
                updateRealtimeViews();
            }

            function showNotification(message, duration = 2000) {
                notificationText.textContent = message;
                notification.classList.add('show');
                setTimeout(() => { notification.classList.remove('show'); }, duration);
            }

            function copyOutput() {
                const textToCopy = outputNodesTextarea.value;
                if (!textToCopy) {
                    showNotification('è¾“å‡ºå†…å®¹ä¸ºç©ºï¼');
                    return;
                }
                if (navigator.clipboard && window.isSecureContext) {
                    navigator.clipboard.writeText(textToCopy).then(() => {
                        showNotification('å·²æˆåŠŸå¤åˆ¶åˆ°å‰ªè´´æ¿ï¼');
                    }).catch(err => { fallbackCopy(textToCopy); });
                } else {
                    fallbackCopy(textToCopy);
                }
            }

            function fallbackCopy(text) {
                const textArea = document.createElement("textarea");
                textArea.value = text;
                textArea.style.position = "fixed";
                textArea.style.top = "-9999px";
                textArea.style.left = "-9999px";
                document.body.appendChild(textArea);
                textArea.focus();
                textArea.select();
                try {
                    if (document.execCommand('copy')) showNotification('å·²é€šè¿‡å¤‡ç”¨æ–¹å¼å¤åˆ¶ï¼');
                    else showNotification('å¤åˆ¶å¤±è´¥ï¼');
                } catch (err) { showNotification('å¤åˆ¶å¤±è´¥ï¼'); }
                document.body.removeChild(textArea);
            }

            function renameSimpleProtocol(node, newName) {
                try {
                    const encodedName = encodeURIComponent(newName);
                    const baseUrl = node.split('#')[0];
                    return `${baseUrl}#${encodedName}`;
                } catch (e) { return node; }
            }

            function renameVmess(node, newName) {
                try {
                    let b64Data = node.replace('vmess://', '').split('#')[0];
                    const cleanedB64Data = b64Data.replace(/\s/g, '');
                    let standardB64 = cleanedB64Data.replace(/-/g, '+').replace(/_/g, '/');
                    standardB64 += '=='.slice(0, (4 - standardB64.length % 4) % 4);
                    const decodedStr = new TextDecoder().decode(Uint8Array.from(atob(standardB64), c => c.charCodeAt(0)));
                    const config = JSON.parse(decodedStr);
                    config.ps = newName;
                    const modifiedJsonStr = JSON.stringify(config);
                    const modifiedB64 = btoa(unescape(encodeURIComponent(modifiedJsonStr)));
                    return `vmess://${modifiedB64}`;
                } catch (e) { return node; }
            }

            updateRealtimeViews();
        });
    </script>
</body>

</html>